"use strict";(self.webpackChunkoneboy_app=self.webpackChunkoneboy_app||[]).push([[6565],{1911:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>t});var r=o(9729);const s={},a=r.createContext(s);function i(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(a.Provider,{value:n},e.children)}},7767:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>j,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"container/forgejo","title":"Forgejo","description":"\u5b98\u65b9\u7f51\u7ad9","source":"@site/docs/container/forgejo.md","sourceDirName":"container","slug":"/container/forgejo","permalink":"/docs/container/forgejo","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1746775359000,"sidebarPosition":28,"frontMatter":{"sidebar_position":28},"sidebar":"leetcodeSidebar","previous":{"title":"Blinko","permalink":"/docs/container/blinko"},"next":{"title":"Beszel","permalink":"/docs/container/beszel"}}');var s=o(5813),a=o(1911);const i={sidebar_position:28},t="Forgejo",c={},d=[{value:"\u5b98\u65b9\u7f51\u7ad9",id:"\u5b98\u65b9\u7f51\u7ad9",level:2},{value:"Docker\u65b9\u5f0f\u5b89\u88c5",id:"docker\u65b9\u5f0f\u5b89\u88c5",level:2},{value:"compose\u6587\u4ef6",id:"compose\u6587\u4ef6",level:3},{value:"env\u6587\u4ef6",id:"env\u6587\u4ef6",level:3},{value:"\u542f\u52a8",id:"\u542f\u52a8",level:3},{value:"\u914d\u7f6e\u6587\u4ef6",id:"\u914d\u7f6e\u6587\u4ef6",level:3},{value:"\u5907\u6ce8",id:"\u5907\u6ce8",level:3}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"forgejo",children:"Forgejo"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5b98\u65b9\u7f51\u7ad9",children:"\u5b98\u65b9\u7f51\u7ad9"}),"\n",(0,s.jsx)(n.p,{children:"Forgejo \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u3001\u81ea\u6258\u7ba1\u7684 Git \u670d\u52a1\u5e73\u53f0\uff0c\u57fa\u4e8e Gitea \u5206\u652f\u5f00\u53d1\uff0c\u63d0\u4f9b\u8f7b\u91cf\u7ea7\u3001\u9ad8\u6548\u7684\u4ee3\u7801\u6258\u7ba1\u65b9\u6848\u3002"}),"\n",(0,s.jsxs)(n.p,{children:["\u5b98\u65b9\u7f51\u7ad9\uff1a",(0,s.jsx)(n.a,{href:"https://forgejo.org",children:"https://forgejo.org"})]}),"\n",(0,s.jsx)(n.h2,{id:"docker\u65b9\u5f0f\u5b89\u88c5",children:"Docker\u65b9\u5f0f\u5b89\u88c5"}),"\n",(0,s.jsx)(n.h3,{id:"compose\u6587\u4ef6",children:"compose\u6587\u4ef6"}),"\n",(0,s.jsxs)(n.p,{children:["\u521b\u5efa ",(0,s.jsx)(n.code,{children:"compose.yml"})," \u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'version: \'3\'\n\nservices:\n  forgejo:\n    image: codeberg.org/forgejo/forgejo:latest\n    container_name: forgejo\n    restart: always\n    environment:\n      - USER_UID=1000\n      - USER_GID=1000\n      - FORGEJO__database__DB_TYPE=postgres\n      - FORGEJO__database__HOST=db:5432\n      - FORGEJO__database__NAME=forgejo\n      - FORGEJO__database__USER=forgejo\n      - FORGEJO__database__PASSWD=forgejo_password\n    ports:\n      - "3000:3000"\n      - "222:22"\n    volumes:\n      - ./data:/data\n    depends_on:\n      - db\n\n  db:\n    image: postgres:14\n    container_name: forgejo-db\n    restart: always\n    environment:\n      - POSTGRES_USER=forgejo\n      - POSTGRES_PASSWORD=forgejo_password\n      - POSTGRES_DB=forgejo\n    volumes:\n      - ./postgres:/var/lib/postgresql/data\n'})}),"\n",(0,s.jsx)(n.h3,{id:"env\u6587\u4ef6",children:"env\u6587\u4ef6"}),"\n",(0,s.jsxs)(n.p,{children:["\u521b\u5efa ",(0,s.jsx)(n.code,{children:".env"})," \u6587\u4ef6\uff08\u53ef\u9009\uff09\uff0c\u7528\u4e8e\u96c6\u4e2d\u7ba1\u7406\u73af\u5883\u53d8\u91cf\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-env",children:"FORGEJO_VERSION=latest\nPOSTGRES_USER=forgejo\nPOSTGRES_PASSWORD=forgejo_password\nPOSTGRES_DB=forgejo\nUSER_UID=1000\nUSER_GID=1000\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u542f\u52a8",children:"\u542f\u52a8"}),"\n",(0,s.jsxs)(n.p,{children:["\u5728 ",(0,s.jsx)(n.code,{children:"compose.yml"})," \u6240\u5728\u76ee\u5f55\u6267\u884c\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker compose up -d\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u542f\u52a8\u540e\u8bbf\u95ee ",(0,s.jsx)(n.code,{children:"http://localhost:3000"})," \u5b8c\u6210\u9996\u6b21\u914d\u7f6e\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u6587\u4ef6",children:"\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,s.jsxs)(n.p,{children:["Forgejo \u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e\u5bb9\u5668\u5185\u8def\u5f84 ",(0,s.jsx)(n.code,{children:"/data/gitea/conf/app.ini"}),"\uff0c\u9996\u6b21\u542f\u52a8\u540e\u81ea\u52a8\u751f\u6210\uff0c\u5e38\u7528\u914d\u7f6e\u9879\u793a\u4f8b\u5982\u4e0b\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ini",children:"[server]\nDOMAIN = git.example.com\nHTTP_PORT = 3000\nROOT_URL = https://git.example.com/\nSSH_PORT = 22\nDISABLE_SSH = false\n\n[database]\nDB_TYPE = postgres\nHOST = db:5432\nNAME = forgejo\nUSER = forgejo\nPASSWD = forgejo_password\n\n[security]\nINSTALL_LOCK = true\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u4fee\u6539\u914d\u7f6e\u540e\u9700\u91cd\u542f\u5bb9\u5668\u751f\u6548\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"\u5907\u6ce8",children:"\u5907\u6ce8"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u63a8\u8350\u4f7f\u7528\u53cd\u5411\u4ee3\u7406\uff08\u5982Nginx\u6216Traefik\uff09\u5b9e\u73b0HTTPS\u8bbf\u95ee\u3002"}),"\n",(0,s.jsxs)(n.li,{children:["\u5b9a\u671f\u5907\u4efd\u6570\u636e\u76ee\u5f55\uff08",(0,s.jsx)(n.code,{children:"./data"}),"\uff09\u548c\u6570\u636e\u5e93\u76ee\u5f55\uff08",(0,s.jsx)(n.code,{children:"./postgres"}),"\uff09\u3002"]}),"\n",(0,s.jsx)(n.li,{children:"\u66f4\u65b0\u955c\u50cf\u524d\u52a1\u5fc5\u5907\u4efd\u6570\u636e\uff0c\u907f\u514d\u6570\u636e\u4e22\u5931\u3002"}),"\n",(0,s.jsxs)(n.li,{children:["\u67e5\u770b\u65e5\u5fd7\u6392\u67e5\u95ee\u9898\uff1a",(0,s.jsx)(n.code,{children:"docker compose logs -f forgejo"})]}),"\n"]})]})}function j(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);